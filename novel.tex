% !TeX program = LuaLaTeX
% !TeX encoding = UTF-8

\documentclass{article}

\usepackage{luatexja}
\usepackage{luatexja-ruby}
\usepackage[no-math]{luatexja-fontspec}
\usepackage[a5paper]{geometry}
\usepackage{float}
\usepackage{setspace}
\usepackage[yyyymmdd]{datetime}
\usepackage{indentfirst}
\usepackage{tipa}  % for \textsubdot
\usepackage[perpage]{footmisc}
\usepackage{graphicx}
\usepackage[unicode,hidelinks]{hyperref}

% \pagestyle{empty}

\renewcommand{\abstractname}{简介}
\renewcommand{\dateseparator}{.}

% 思源黑体
\defaultjfontfeatures{
  YokoFeatures={JFM=prop}
}
\newjfontfamily{\jpfont}{SourceHanSansJP}[
  UprightFont=*-Normal,
  BoldFont=*-Medium,
  Language=Japanese
]
\setmainjfont{SourceHanSansCN}[
  UprightFont=*-Normal,
  BoldFont=*-Medium,
  Language=Chinese Simplified
]
\setsansfont{SourceHanSansCN}[
  UprightFont=*-Normal,
  BoldFont=*-Medium
]
\renewcommand{\familydefault}{\sfdefault}

\renewcommand{\contentsname}{目录}
\newcommand*{\illust}[1]{
  \begin{figure}[phtb]
    \vspace*{\dimexpr -\paperheight*3/25 \relax}
    \makebox[\linewidth]{
      \includegraphics[width=\paperwidth,height=\paperheight]{#1}
    }
  \end{figure}
}

\ltjsetparameter{prebreakpenalty={`—,10000}}
\ltjsetparameter{prebreakpenalty={`…,10000}}
\ltjsetparameter{jaxspmode={`，,inhibit}}
\ltjsetparameter{jaxspmode={`。,inhibit}}

\onehalfspacing
\tolerance=500
\setlength{\emergencystretch}{1.5em}

\title{标题}
\author{作者}

\begin{document}

\maketitle

\begin{abstract}
简介内容
\end{abstract}

\tableofcontents
\clearpage

\section{第一章的标题}

第一章的内容。

这一句话使用了\ruby{注音}{ruby}：他是一个\ruby{绅士}{变态}。

这一个单词\footnote{单词的注释}需要注释。

这一个\textsubdot{单}\textsubdot{词}需要加着重号。

中文和{\jpfont \ruby{日|本|語}{に|ほん|ご}}可以混排。

\section{第二章的标题}

第二章的内容。

\end{document}
